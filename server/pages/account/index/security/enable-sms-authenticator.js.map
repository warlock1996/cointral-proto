{"version":3,"file":"pages/account/index/security/enable-sms-authenticator.js","sources":["webpack:///./pages/account/index/security/enable-sms-authenticator.vue?cf2e","webpack:///./pages/account/index/security/enable-sms-authenticator.vue?4651","webpack:///./pages/account/index/security/enable-sms-authenticator.vue?1e17","webpack:///./pages/account/index/security/enable-sms-authenticator.vue","webpack:///./pages/account/index/security/enable-sms-authenticator.vue?38fd","webpack:///./pages/account/index/security/enable-sms-authenticator.vue?9f41","webpack:///./pages/account/index/security/enable-sms-authenticator.vue?68cf"],"sourcesContent":["import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./enable-sms-authenticator.vue?vue&type=style&index=0&id=5848b5e8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./enable-sms-authenticator.vue?vue&type=style&index=0&id=5848b5e8&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".sms-enable-page[data-v-5848b5e8]{min-height:100vh;display:flex;justify-content:center;align-items:center}.sms-enable-card[data-v-5848b5e8]{width:384px;box-shadow:0 0 10px rgba(0,0,0,.10196);border-radius:3px}.sms-enable-heading[data-v-5848b5e8]{color:#212833}.phone-input[data-v-5848b5e8]{margin:20px auto}.invalidPhoneNo.vue-tel-input[data-v-5848b5e8]{border:1px solid red!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sms-enable-page\"},[_c('a-card',{staticClass:\"sms-enable-card border-none\"},[_c('h2',{staticClass:\"sms-enable-heading Roboto-Medium\",attrs:{\"align\":\"center\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('text_enable_sms_auth'))+\"\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"my-10\"},[(_vm.showError)?_c('a-alert',{attrs:{\"message\":_vm.$t('warning_title'),\"description\":_vm.errorMsg,\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function (e) { return (_vm.showError = false); }}}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"phone-input\"},[_c('vue-tel-input',{class:{ invalidPhoneNo: !_vm.isValidPhoneNo },attrs:{\"inputClasses\":\"ant-input ant-input-lg Roboto-Regular\",\"dynamicPlaceholder\":true},on:{\"validate\":_vm.validateMobileNumber},model:{value:(_vm.Sms.PhoneNumber),callback:function ($$v) {_vm.$set(_vm.Sms, \"PhoneNumber\", $$v)},expression:\"Sms.PhoneNumber\"}}),_vm._v(\" \"),(!_vm.isValidPhoneNo)?_c('span',{staticClass:\"Roboto-Regular\",style:({ color: 'red' })},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('invalid_phone_no'))+\"\\n      \")]):_vm._e()],1),_vm._v(\" \"),_c('a-button',{staticClass:\"Roboto-Medium\",attrs:{\"disabled\":!_vm.isValidPhoneNo,\"size\":\"large\",\"type\":\"primary\",\"loading\":_vm.enableSmsLoading,\"block\":\"\"},on:{\"click\":_vm.enableSms}},[_vm._v(_vm._s(_vm.$t('text_approve')))])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { VueTelInput } from 'vue-tel-input'\r\nexport default {\r\n  name: 'EnableSmsAuthenticatorPage',\r\n  middleware: ['auth'],\r\n  components: {\r\n    VueTelInput,\r\n  },\r\n  head(){\r\n    return{\r\n      title: 'SMS OnayÄ± | Cointral.com',\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      Sms: {\r\n        AreaCode: '',\r\n        PhoneNumber: '',\r\n      },\r\n      isValidPhoneNo: false,\r\n      PhoneNoDetails: {},\r\n      enableSmsLoading: false,\r\n\r\n      showError: false,\r\n      errorMsg: '',\r\n    }\r\n  },\r\n  methods: {\r\n    async enableSms() {\r\n      const { PhoneNumber } = this.Sms\r\n      let _PhoneNumber\r\n      if (PhoneNumber.startsWith('+')) {\r\n        _PhoneNumber = PhoneNumber.slice(1).split(' ').join('')\r\n      } else {\r\n        _PhoneNumber =\r\n          this.PhoneNoDetails.country.dialCode +\r\n          PhoneNumber.slice(1).split(' ').join('')\r\n      }\r\n      try {\r\n        const {\r\n          $axios,\r\n          $cookies,\r\n          $store,\r\n          $config: { FINANCE_API_URL },\r\n        } = this\r\n        const authHeaders = { Authorization: 'Bearer ' + $cookies.get('Token') }\r\n        this.enableSmsLoading = true\r\n        const response = await $axios.post(\r\n          FINANCE_API_URL + '/EnableSMS',\r\n          { ...this.Sms, PhoneNumber: _PhoneNumber },\r\n          {\r\n            headers: authHeaders,\r\n          }\r\n        )\r\n        const { Success, Message } = response.data\r\n        if (Success) {\r\n          const { SecurityVerificationToken } = response.data\r\n          $store.commit('auth/setVerficationData', {\r\n            SecurityVerificationToken,\r\n            status: true,\r\n            redirectURI: '/account',\r\n          })\r\n          this.enableSmsLoading = false\r\n          this.$router.push(this.localeRoute('/security-verification'))\r\n        } else {\r\n          this.showError = true\r\n          this.errorMsg = Message\r\n          this.enableSmsLoading = false\r\n        }\r\n      } catch (e) {\r\n        if (e.response) {\r\n          const { Message } = e.response.data\r\n          this.showError = true\r\n          this.errorMsg = Message\r\n        }\r\n        this.enableSmsLoading = false\r\n      }\r\n    },\r\n    validateMobileNumber(payload) {\r\n      this.PhoneNoDetails = payload\r\n      this.isValidPhoneNo = payload.isValid\r\n      this.Sms.AreaCode = payload.country.dialCode\r\n    },\r\n  },\r\n  watch: {\r\n    'Sms.PhoneNumber': function () {\r\n      if (this.Sms.PhoneNumber === '') {\r\n        this.isValidPhoneNo = true\r\n      }\r\n    },\r\n  },\r\n}\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./enable-sms-authenticator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./enable-sms-authenticator.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./enable-sms-authenticator.vue?vue&type=template&id=5848b5e8&scoped=true&\"\nimport script from \"./enable-sms-authenticator.vue?vue&type=script&lang=js&\"\nexport * from \"./enable-sms-authenticator.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./enable-sms-authenticator.vue?vue&type=style&index=0&id=5848b5e8&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"5848b5e8\",\n  \"298dd845\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./enable-sms-authenticator.vue?vue&type=style&index=0&id=5848b5e8&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"54ff703f\", content, true, context)\n};"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAEA;AACA;AAVA;AAYA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAMA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAEA;AADA;AAIA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAxDA;AAyDA;AACA;AACA;AACA;AACA;AACA;AALA;AAlFA;;AChDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}